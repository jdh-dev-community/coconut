version: 0.2
phases:
  install:
    commands:
      - export LANG=en_US.UTF-8
      - export LC_ALL=en_US.UTF-8
      # unzip 설치 (Amazon Linux, CentOS, Red Hat 등)
      - sudo yum update -y
      - sudo yum install -y unzip
      # AWS CLI v2 설치
      - curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"
      - unzip awscliv2.zip
      - sudo ./aws/install
  pre_build:
    commands:
      - java -version
      - export JAVA_TOOL_OPTIONS=-Dfile.encoding=UTF-8
      - export JAVA_OPTS="$JAVA_OPTS -Dfile.encoding=UTF-8"
      - export GRADLE_OPTS="-Dfile.encoding=UTF-8"
      - aws s3 cp $REMOTE_PATH ./src/main/resources/application.yml
  build:
    commands:
      - ./gradlew test -Dfile.encoding=UTF-8

cache:
  paths: []

artifacts:
  files:
    - '**/*'
