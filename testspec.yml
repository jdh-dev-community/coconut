version: 0.2
phases:
  install:
    commands:
      - wget -O- https://apt.corretto.aws/corretto.key | sudo apt-key add -
      - sudo add-apt-repository 'deb https://apt.corretto.aws stable main'
      - sudo apt-get update
      - sudo apt-get install -y java-17-amazon-corretto-jdk
      - export LANG=en_US.UTF-8
      - export LC_ALL=en_US.UTF-8
  pre_build:
    commands:
      - java -version
      - export JAVA_TOOL_OPTIONS=-Dfile.encoding=UTF-8
      - export JAVA_OPTS="$JAVA_OPTS -Dfile.encoding=UTF-8"
      - export GRADLE_OPTS="-Dfile.encoding=UTF-8"
      - aws s3 cp $REMOTE_PATH ./src/main/resources/application.yml
  build:
    commands:
      - ./gradlew test -Dfile.encoding=UTF-8

cache:
  paths: []

artifacts:
  files:
    - '**/*'